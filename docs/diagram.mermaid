graph TD
    subgraph "Layer 1: Frontend (User Browser)"
        A[<i class='fas fa-desktop'></i> UI Console <br> main.js]
    end

    subgraph "Layer 2: Off-Chain Services (Docker)"
        B[<i class='fas fa-satellite-dish'></i> Oracle Agent <br> oracle_agent.py] -- Raw Earthquake Data --> C{<i class='fas fa-brain'></i> Validator Agent <br> validator_agent.py}
        C -- Validated Command --> D[<i class='fas fa-key'></i> Action Agent Bridge <br> action_agent.py]
    end

    subgraph "Layer 3: On-Chain Canisters (Internet Computer)"
        style E fill:#f9f,stroke:#333,stroke-width:2px
        style G fill:#ccf,stroke:#333,stroke-width:2px
        E[<i class='fa fa-industry'></i> Event Factory] -- "1. Creates" --> G[<i class='fa fa-users'></i> Event DAO]
        H[<i class='fa fa-university'></i> Insurance Vault] -- "2. Funds" --> G
        I[<i class='fa fa-id-card'></i> DID/SBT Ledger]
    end

    %% Interaction Flow
    A -- "Chat Command: 'send signal...'" --> C
    A -- "User Actions (Vote/Donate/Profile)" --> G
    A -- "DID/SBT Profile Management" --> I
    D -- "Call 'declare_event'" --> E
    G -- "Request 'mint_sbt' after donation" --> I
